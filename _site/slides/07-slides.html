<!DOCTYPE html>
<html lang="en"><head>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-234273d1456647dabc34a594ac50e507.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.7.32">

  <title>POLS 1600</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
      }
    pre.numberSource { margin-left: 3em;  padding-left: 4px; }
    div.sourceCode
      { color: #24292e;  }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #24292e; } /* Normal */
    code span.al { color: #ff5555; font-weight: bold; } /* Alert */
    code span.an { color: #6a737d; } /* Annotation */
    code span.at { color: #d73a49; } /* Attribute */
    code span.bn { color: #005cc5; } /* BaseN */
    code span.bu { color: #d73a49; } /* BuiltIn */
    code span.cf { color: #d73a49; } /* ControlFlow */
    code span.ch { color: #032f62; } /* Char */
    code span.cn { color: #005cc5; } /* Constant */
    code span.co { color: #6a737d; } /* Comment */
    code span.cv { color: #6a737d; } /* CommentVar */
    code span.do { color: #6a737d; } /* Documentation */
    code span.dt { color: #d73a49; } /* DataType */
    code span.dv { color: #005cc5; } /* DecVal */
    code span.er { color: #ff5555; text-decoration: underline; } /* Error */
    code span.ex { color: #d73a49; font-weight: bold; } /* Extension */
    code span.fl { color: #005cc5; } /* Float */
    code span.fu { color: #6f42c1; } /* Function */
    code span.im { color: #032f62; } /* Import */
    code span.in { color: #6a737d; } /* Information */
    code span.kw { color: #d73a49; } /* Keyword */
    code span.op { color: #24292e; } /* Operator */
    code span.ot { color: #6f42c1; } /* Other */
    code span.pp { color: #d73a49; } /* Preprocessor */
    code span.re { color: #6a737d; } /* RegionMarker */
    code span.sc { color: #005cc5; } /* SpecialChar */
    code span.ss { color: #032f62; } /* SpecialString */
    code span.st { color: #032f62; } /* String */
    code span.va { color: #e36209; } /* Variable */
    code span.vs { color: #032f62; } /* VerbatimString */
    code span.wa { color: #ff5555; } /* Warning */
    /* CSS for citations */
    div.csl-bib-body { }
    div.csl-entry {
      clear: both;
      margin-bottom: 0em;
    }
    .hanging-indent div.csl-entry {
      margin-left:2em;
      text-indent:-2em;
    }
    div.csl-left-margin {
      min-width:2em;
      float:left;
    }
    div.csl-right-inline {
      margin-left:2em;
      padding-left:1em;
    }
    div.csl-indent {
      margin-left: 2em;
    }  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-8979bb8451ddc1038f930ac611262c50.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

  <link href="../site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

  <script src="../site_libs/datatables-binding-0.33/datatables.js"></script>

  <script src="../site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

  <link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

  <link href="../site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

  <script src="../site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

  <link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

  <script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

  <script src="../site_libs/kePrint-0.0.1/kePrint.js"></script>

  <link href="../site_libs/lightable-0.0.1/lightable.css" rel="stylesheet">

  <link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" align="left" data-background-image="images/pols1600_hex.png" data-background-position="90% 50%" data-background-size="40%" class="quarto-title-block center">
  <h1 class="title">POLS 1600</h1>
  <p class="subtitle">Interpreting and Evaluating<br>Linear Models</p>

<div class="quarto-title-authors">
</div>

  <p class="date">Updated Nov 6, 2025</p>
</section>
<section>
<section id="overview" class="title-slide slide level1 inverse center">
<h1><i class="fa-solid fa-map-location" aria-label="map-location"></i> Overview</h1>

</section>
<section id="class-plan" class="slide level2">
<h2>Class Plan</h2>
<ul>
<li class="fragment">Announcements (2-3 min)</li>
<li class="fragment">Setup (2-3 min)</li>
<li class="fragment">Feedback (15 min)</li>
<li class="fragment">Topics:
<ul>
<li class="fragment">What does it mean to control for X</li>
<li class="fragment">How to make predictions with regression</li>
<li class="fragment">Evaluating model fit</li>
<li class="fragment">Difference-in-Differences</li>
<li class="fragment">Set up for Lab 7</li>
</ul></li>
</ul>
</section>
<section id="goals" class="slide level2">
<h2>Goals</h2>
<ul>
<li class="fragment"><p>Regression models <span class="blue">partition variation</span> in an outcome into variation explained by the model and not explained by the model</p></li>
<li class="fragment"><p>Individual regression coefficients reflect the <span class="blue">variation explained by that predictor</span>, and <span class="blue">only that predictor</span></p></li>
<li class="fragment"><p><span class="blue">Predicted values</span> for regression models aid in <span class="blue">substantive interpretation</span></p></li>
<li class="fragment"><p><span class="blue">Measures of model fit</span> like <span class="math inline">\(R^2\)</span> can be useful for comparing different regression models</p></li>
<li class="fragment"><p><span class="blue">Difference-in-differences</span> designs combine <span class="blue">pre-post</span> and <span class="blue">treatment-control</span> comparisons to make <span class="blue">stronger causal claims</span>.</p></li>
</ul>
</section>
<section id="annoucements" class="slide level2">
<h2>Annoucements</h2>
<ul>
<li class="fragment"><a href="https://pols1600.paultesta.org/assignments/a1" target="_blank">Assignment 1: Research Questions</a> Feedback end of today
<ul>
<li class="fragment">Feedback by class on Thursday</li>
</ul></li>
<li class="fragment"><a href="https://pols1600.paultesta.org/assignments/a2" target="_blank">Assignment 2 Data:</a> due Friday March 22</li>
</ul>
</section>
<section id="setup-packages-for-today" class="slide level2">
<h2>Setup: Packages for today</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="do">## Pacakges for today</span></span>
<span id="cb1-2"><a></a>the_packages <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb1-3"><a></a>  <span class="do">## R Markdown</span></span>
<span id="cb1-4"><a></a>  <span class="st">"kableExtra"</span>,<span class="st">"DT"</span>,<span class="st">"texreg"</span>,<span class="st">"htmltools"</span>,</span>
<span id="cb1-5"><a></a>  <span class="do">## Tidyverse</span></span>
<span id="cb1-6"><a></a>  <span class="st">"tidyverse"</span>, <span class="st">"lubridate"</span>, <span class="st">"forcats"</span>, <span class="st">"haven"</span>, <span class="st">"labelled"</span>,</span>
<span id="cb1-7"><a></a>  <span class="do">## Extensions for ggplot</span></span>
<span id="cb1-8"><a></a>  <span class="st">"ggmap"</span>,<span class="st">"ggrepel"</span>, <span class="st">"ggridges"</span>, <span class="st">"ggthemes"</span>, <span class="st">"ggpubr"</span>, </span>
<span id="cb1-9"><a></a>  <span class="st">"GGally"</span>, <span class="st">"scales"</span>, <span class="st">"dagitty"</span>, <span class="st">"ggdag"</span>, <span class="st">"ggforce"</span>,</span>
<span id="cb1-10"><a></a>  <span class="co"># Data </span></span>
<span id="cb1-11"><a></a>  <span class="st">"COVID19"</span>,<span class="st">"maps"</span>,<span class="st">"mapdata"</span>,<span class="st">"qss"</span>,<span class="st">"tidycensus"</span>, <span class="st">"dataverse"</span>, </span>
<span id="cb1-12"><a></a>  <span class="co"># Analysis</span></span>
<span id="cb1-13"><a></a>  <span class="st">"DeclareDesign"</span>, <span class="st">"easystats"</span>, <span class="st">"zoo"</span></span>
<span id="cb1-14"><a></a>)</span>
<span id="cb1-15"><a></a></span>
<span id="cb1-16"><a></a><span class="do">## Define a function to load (and if needed install) packages</span></span>
<span id="cb1-17"><a></a></span>
<span id="cb1-18"><a></a>ipak <span class="ot">&lt;-</span> <span class="cf">function</span>(pkg){</span>
<span id="cb1-19"><a></a>    new.pkg <span class="ot">&lt;-</span> pkg[<span class="sc">!</span>(pkg <span class="sc">%in%</span> <span class="fu">installed.packages</span>()[, <span class="st">"Package"</span>])]</span>
<span id="cb1-20"><a></a>    <span class="cf">if</span> (<span class="fu">length</span>(new.pkg)) </span>
<span id="cb1-21"><a></a>        <span class="fu">install.packages</span>(new.pkg, <span class="at">dependencies =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-22"><a></a>    <span class="fu">sapply</span>(pkg, require, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-23"><a></a>}</span>
<span id="cb1-24"><a></a></span>
<span id="cb1-25"><a></a><span class="do">## Install (if needed) and load libraries in the_packages</span></span>
<span id="cb1-26"><a></a><span class="fu">ipak</span>(the_packages)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   kableExtra            DT        texreg     htmltools     tidyverse 
         TRUE          TRUE          TRUE          TRUE          TRUE 
    lubridate       forcats         haven      labelled         ggmap 
         TRUE          TRUE          TRUE          TRUE          TRUE 
      ggrepel      ggridges      ggthemes        ggpubr        GGally 
         TRUE          TRUE          TRUE          TRUE          TRUE 
       scales       dagitty         ggdag       ggforce       COVID19 
         TRUE          TRUE          TRUE          TRUE          TRUE 
         maps       mapdata           qss    tidycensus     dataverse 
         TRUE          TRUE          TRUE          TRUE          TRUE 
DeclareDesign     easystats           zoo 
         TRUE          TRUE          TRUE </code></pre>
</div>
</div>
</section>
<section id="feedback" class="slide level2 center">
<h2>Feedback</h2>
</section>
<section id="what-did-we-like" class="slide level2 smaller">
<h2>What did we like</h2>
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-5eb13ff819617bf42a38" style="width:100%;height:90%;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-5eb13ff819617bf42a38">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],["I like the labs and working with my group.","I have liked the guided lab as I feel like my group is not prepared to work together fully to solve lab problems","That we work with recent data which makes it more engaging.","I really liked creating the regression tables and visualizing them. I feel like I see them in every scientific paper, and knowing how they're created makes it so much easier to understand them.","I like using Covid data because it's easier to apply to the data because we are familiar with it","I liked this lab a lot.","making graphs, learning about controlling for confounding variables","i like working in a group for the labs","I really enjoyed learning how to make figures/ plot data!","Felt a little lost by the explanations today","I am enjoying learning how to move around script and building a muscle in that sense. I also like how modern and applicable each dataset is","I actually really had fun at the lab this week, and even got ahead at certain points!","I really liked the lab this week! I thought it was super interesting and R is definitely starting to click for me.","Coming up with our research questions required me to understand previous reports I read from a quantitative research method perspective.","I enjoy the group work and I believe that there is a good balance between work done individually and things we walk through as a group.","I enjoyed the lab, a good level of trying and instruction","I like working in groups, it's been fun to meet new people."]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Likes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Likes","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="what-did-we-dislike" class="slide level2 smaller">
<h2>What did we dislike</h2>
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-9298019afa6d503ca340" style="width:100%;height:90%;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-9298019afa6d503ca340">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],["Maybe I would like to have more time to write code and understand syntax outside of copying code chunks from slides and moving so quickly.","I feel like I still am not sure which commands to use when we get to more complicated problems.","Just trying to remember and keep track of all the parts of the labs. Not a bad thing and Professor Testa gives great breakdowns of the instructions.","How to change the color of points on a graph? I've just been copy pasting earlier code for that because otherwise it hasn't been working when I try to code it myself.","I just find it hard to catch up once I have made an error, but usually once I fix my error, I can use the instructions to try and catch up","How the summarise function works.","I wish I felt more confident in doing the basic coding for labs.","I think the variables and the statics of the graphs/coding we are doing is very hard to understand","N/A","I need you to explain more thoroughly what standard deviation and iscolating variables does.","Class moves a bit fast at times, especially labs","I am finding the final to be a bit hard to understand.","The tutorials (I'm also way behind so it's definitely my fault).","The speed at which lectures on Tuesdays take place can be discouraging","Some of the ways in which topic in experimentation and research studies are explained could be a little bit clearer. The mathematical equations are likely helpful for some but it may be a bit more beneficial if accompanied with more explanation.","I personally would enjoy a little more conceptual background of why we do certain things in R but recognize we might not have the time or be at the level as a class for that to be valuable.","One thing I've had trouble with lately is getting my labs to save properly, do I always have to go to file and then save as?"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Dislikes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Dislikes","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="what-were-good-at" class="slide level2 smaller">
<h2>What we’re good at</h2>
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-2e16c8ae8a713d4a2b4f" style="width:100%;height:90%;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-2e16c8ae8a713d4a2b4f">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],["I think I understand pipe, mutate, and filter really well.","i can use the basic functions like dim and summary well","copy/paste :)","fitting linear regression models","uhhh, using the outline to properly layout my document","Linear regression models","linear regression models.","I can do the basic codes like dim, summary to see the data frames","I'm good at making a new code chunk.","I am good at creating graphs once I have the variables.","Figuring out/ trying to understand my errors and really reading through the code","Copy, paste, replace","Linear regression I guess.","creating co-chunks and halfpipes","I am able to interpret patterns code and use it to workshop backwards how I could create my own code.","Find solutions to things I don't know how to do","One thing I do really well in R is set up graphs."]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>code_skills<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"code_skills","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="what-were-working-on" class="slide level2 smaller">
<h2>What we’re working on</h2>
<div class="cell">
<div class="cell-output-display">
<div id="htmlwidget-e5505f5f0de0e5330ef8" style="width:100%;height:90%;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-e5505f5f0de0e5330ef8">{"x":{"filter":"none","vertical":false,"fillContainer":false,"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],["I think I want more time with summarise vs table functions and also just how to write some code syntactically such as ggplot. It would me nice to maybe have some site that shows syntax in R.","How to know when to use commands and apply them to conceptual questions like understanding how to use multiple commands together the right way","remembering all the codes for our data (ex. %&amp;gt;% and #). It gets a little confusing so I'm hoping to understand them more as time goes on.","the aesthetics and geometries of graphs","fast keys","Syntax of functions","the pipe function","","I wish I better understood what the code is actually doing. Like I know what it does but I don't actually understand why it's doing that which makes it harder to remember what code to use.","I wish i understood SD versus raw data. I was very confused by the lesson today conceptually when we hit the LM part\n","Memorizing each command! Knowing what to put down and when, but I think that will come naturally with more repetition like anything new","I think sometimes the tutorials are a bit difficult, and I wish we had more space to work on those in class.","Some of the functions that we used in the first few labs.","understanding how to write equations in R notation","One thing I wish I understood better is distinguishing between which functions use the pipe function and feeling more comfortable using that in my code.","Some general understandings of the environment and how variables are stored in R","I wish I understood how to find data myself and then download that data into R."]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>code_challenge<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"code_challenge","targets":1}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="how-are-we-doing" class="slide level2">
<h2>How are we doing?</h2>

<img data-src="07-slides_files/figure-revealjs/howwedoing-1.png" width="960" class="r-stretch"></section>
<section id="dont-trust-the-polls" class="slide level2">
<h2>Don’t trust the polls</h2>

<img data-src="07-slides_files/figure-revealjs/figtrump-1.png" width="960" class="r-stretch"></section>
<section id="section" class="slide level2">
<h2></h2>

<img data-src="07-slides_files/figure-revealjs/unnamed-chunk-10-1.png" width="960" class="r-stretch"></section>
<section id="what-should-we-do-going-forward" class="slide level2">
<h2>What should we do going forward?</h2>
<ul>
<li class="fragment">From me:
<ul>
<li class="fragment">Shorter labs</li>
<li class="fragment">Shorter slides</li>
<li class="fragment">More coding, less copy-pasting</li>
</ul></li>
<li class="fragment">From you?</li>
</ul>
</section></section>
<section>
<section id="what-does-it-mean-to-control-for-x" class="title-slide slide level1 inverse center">
<h1><i class="fa-solid fa-lightbulb" aria-label="lightbulb"></i> What does it mean to “control for X”</h1>

</section>
<section id="regression-models-partition-variance" class="slide level2 smaller">
<h2>Regression models partition variance</h2>
<p>Regression models <span class="blue">partition variance</span>, separating the <span class="blue">variation in the outcome</span> <strong>into</strong> <span class="blue">variation explained by the predictors</span> in our model and the <span class="blue">remaining variation not explained</span> by these predictors</p>
<p><span class="math display">\[\begin{aligned}
\textrm{Total Variance} &amp;= \textrm{Variance Explained by Model} + \textrm{Unexplained Variance} \\
\textrm{Observed} &amp;= \textrm{Predicted Value} + \textrm{Error}\\
\textrm{Y} &amp;=  E[Y|X] + \epsilon\\
\textrm{Y} &amp;=  X\hat{\beta} + \hat{\epsilon}\\
\textrm{Y} &amp;= \hat{Y} + \hat{\epsilon}
\end{aligned}\]</span></p>
</section>
<section id="section-1" class="slide level2 smaller">
<h2></h2>
<h4 id="coefficients-describe-the-unique-variance-in-y-explained-by-x-and-only-x">Coefficients describe the unique variance in Y explained by X (and only X)</h4>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Task</a></li><li><a href="#tabset-1-2"><i class="fa-solid fa-code" aria-label="code"></i></a></li><li><a href="#tabset-1-3"><i class="fa-solid fa-table" aria-label="table"></i></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<p>The coefficients in a regression model describe the variation in the outcome explained by that predictor, and only that predictor.</p>
<p>Let’s fit three models from last week’s lab and look at how the coefficients change from model to model</p>
</div>
<div id="tabset-1-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a><span class="fu">load</span>(<span class="fu">url</span>(<span class="st">"https://pols1600.paultesta.org/files/data/06_lab.rda"</span>))</span>
<span id="cb3-2"><a></a>m1 <span class="ot">&lt;-</span> <span class="fu">lm</span>(new_deaths_pc_14day <span class="sc">~</span> rep_voteshare_std, covid_lab)</span>
<span id="cb3-3"><a></a>m2 <span class="ot">&lt;-</span> <span class="fu">lm</span>(new_deaths_pc_14day <span class="sc">~</span> rep_voteshare_std <span class="sc">+</span> med_age_std, covid_lab)</span>
<span id="cb3-4"><a></a>m3 <span class="ot">&lt;-</span> <span class="fu">lm</span>(new_deaths_pc_14day <span class="sc">~</span> rep_voteshare_std <span class="sc">+</span> med_age_std <span class="sc">+</span> med_income_std, covid_lab)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-3">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">htmlreg</span>(<span class="fu">list</span>(m1, m2, m3)) <span class="sc">%&gt;%</span> <span class="fu">HTML</span>() <span class="sc">%&gt;%</span> <span class="fu">browsable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="texreg caption-top" data-quarto-postprocess="true" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;caption-side: bottom;color: #000000;border-top: 2px solid #000000;">
<caption>Statistical models</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">&nbsp;</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">Model 1</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">Model 2</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">Model 3</th>
</tr>
</thead>
<tbody>
<tr class="odd" style="border-top: 1px solid #000000;">
<td style="padding-left: 5px; padding-right: 5px">(Intercept)</td>
<td style="padding-left: 5px; padding-right: 5px">0.57<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.57<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.57<sup>***</sup></td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.04)</td>
</tr>
<tr class="odd">
<td style="padding-left: 5px; padding-right: 5px">rep_voteshare_std</td>
<td style="padding-left: 5px; padding-right: 5px">0.23<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.23<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.07</td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.07)</td>
</tr>
<tr class="odd">
<td style="padding-left: 5px; padding-right: 5px">med_age_std</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">0.03</td>
<td style="padding-left: 5px; padding-right: 5px">-0.02</td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
</tr>
<tr class="odd">
<td style="padding-left: 5px; padding-right: 5px">med_income_std</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">-0.22<sup>**</sup></td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.07)</td>
</tr>
<tr class="odd" style="border-top: 1px solid #000000;">
<td style="padding-left: 5px; padding-right: 5px">R<sup>2</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.31</td>
<td style="padding-left: 5px; padding-right: 5px">0.31</td>
<td style="padding-left: 5px; padding-right: 5px">0.44</td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">Adj. R<sup>2</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.29</td>
<td style="padding-left: 5px; padding-right: 5px">0.28</td>
<td style="padding-left: 5px; padding-right: 5px">0.40</td>
</tr>
<tr class="odd" style="border-bottom: 2px solid #000000;">
<td style="padding-left: 5px; padding-right: 5px">Num. obs.</td>
<td style="padding-left: 5px; padding-right: 5px">51</td>
<td style="padding-left: 5px; padding-right: 5px">51</td>
<td style="padding-left: 5px; padding-right: 5px">51</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td colspan="4" style="font-size: 0.8em"><sup>***</sup>p &lt; 0.001; <sup>**</sup>p &lt; 0.01; <sup>*</sup>p &lt; 0.05</td>
</tr>
</tfoot>

</table>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="why-do-coefficients-change-when-we-control-for-variables" class="slide level2 center">
<h2>Why do coefficients change when we control for variables?</h2>
</section>
<section id="residualized-regression" class="slide level2">
<h2>Residualized Regression</h2>
<p>Residualized regression is way of understanding what it means to <span class="blue">control for variables</span> in a regression.</p>
<p>Residualized regression provides a way of illustrating what we mean when say the coefficients describe the unique variance in Y explained by some predictor <span class="math inline">\(x\)</span> (and only <span class="math inline">\(x\)</span>)</p>
</section>
<section id="whats-a-residual" class="slide level2">
<h2>What’s a residual</h2>
<ul>
<li class="fragment"><span class="blue">Residuals</span> represent the part of the outcome variable, <span class="blue">not explained</span> by the predictors in a model
<ul>
<li class="fragment">Difference between the observed <span class="math inline">\(y\)</span> and the predicted <span class="math inline">\(\hat{y}\)</span></li>
</ul></li>
</ul>
<p><span class="math display">\[y = \overbrace{\beta_0 + \beta_1x_1 + \beta_2 x_2  + \dots \beta_j x_j}^{\text{Predictors}} + \underbrace{\epsilon}_{\text{Residuals}}\]</span></p>
</section>
<section id="residuals-are-uncorrelated-with-x-and-haty" class="slide level2 smaller">
<h2>Residuals are uncorrelated with <span class="math inline">\(X\)</span> and <span class="math inline">\(\hat{y}\)</span></h2>
<div class="columns">
<div class="column" style="width:40%;">
<p>Residuals are uncorrelated with (orthogonal to) the predictors <span class="math inline">\(X\)</span>, and predicted values <span class="math inline">\(X\beta\)</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a><span class="co"># Trust but verify</span></span>
<span id="cb5-2"><a></a><span class="fu">cor</span>(<span class="fu">resid</span>(m2),covid_lab<span class="sc">$</span>rep_voteshare_std) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.337636e-17</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="fu">cor</span>(<span class="fu">resid</span>(m2),covid_lab<span class="sc">$</span>med_age_std)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.946319e-17</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a><span class="fu">cor</span>(<span class="fu">resid</span>(m2),<span class="fu">fitted</span>(m2))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -7.506391e-17</code></pre>
</div>
</div>
</div><div class="column" style="width:55%;">
<p><img data-src="https://www.researchgate.net/publication/299483509/figure/fig1/AS:992683870937088@1613685686096/llustration-of-the-linear-regression-model-as-a-projection-method.png"></p>
</div></div>
</section>
<section id="section-4" class="slide level2 smaller scrollable">
<h2></h2>
<h4 id="residualized-regression-1">Residualized Regression</h4>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1"><i class="fa-solid fa-lightbulb" aria-label="lightbulb"></i></a></li><li><a href="#tabset-2-2"><i class="fa-solid fa-code" aria-label="code"></i> m2</a></li><li><a href="#tabset-2-3"><i class="fa-solid fa-code" aria-label="code"></i> m3</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<p>For a model like <code>m2</code> we can recover the coefficient on <code>rep_voteshare_std</code> by:</p>
<ol type="1">
<li>Regressing <code>new_deaths_pc_14day</code> on <code>med_age_std</code> to get the <span class="blue">residual</span> variation in Covid-19 deaths <span class="blue">not explained</span> by median age</li>
<li>Regressing <code>rep_voteshare_std</code> on <code>med_age_std</code> to get the <span class="blue">residual</span> variation in Republican Vote Share <span class="blue">not explained</span> by median age</li>
<li>Regressing the residuals from 1. (Deaths not explained by age) on the residuals from 2. (Vote share not explained by age) to obtain the <span class="blue">same</span> coefficient from <code>m2</code> for <code>rep_voteshare_std</code></li>
</ol>
<p>The same principle holds for <code>m3</code></p>
</div>
<div id="tabset-2-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a><span class="co"># 1. Regressing `new_deaths_pc_14da` on `med_age_std`</span></span>
<span id="cb11-2"><a></a>m2_death_by_age <span class="ot">&lt;-</span> <span class="fu">lm</span>(new_deaths_pc_14day <span class="sc">~</span> med_age_std, covid_lab)</span>
<span id="cb11-3"><a></a><span class="co"># Save residuals</span></span>
<span id="cb11-4"><a></a>covid_lab<span class="sc">$</span>res_death_no_age <span class="ot">&lt;-</span> <span class="fu">resid</span>(m2_death_by_age)</span>
<span id="cb11-5"><a></a></span>
<span id="cb11-6"><a></a><span class="co"># 2. Regressing `rep_voteshare_std` on `med_age_std` </span></span>
<span id="cb11-7"><a></a>m2_repvs_by_age <span class="ot">&lt;-</span> <span class="fu">lm</span>(rep_voteshare_std <span class="sc">~</span> med_age_std, covid_lab)</span>
<span id="cb11-8"><a></a><span class="co"># Save residuals</span></span>
<span id="cb11-9"><a></a>covid_lab<span class="sc">$</span>res_repvs_no_age <span class="ot">&lt;-</span> <span class="fu">resid</span>(m2_repvs_by_age)</span>
<span id="cb11-10"><a></a></span>
<span id="cb11-11"><a></a><span class="co"># 3. Residualized regression of deaths on Rep Vote Share</span></span>
<span id="cb11-12"><a></a>m2_res <span class="ot">&lt;-</span> <span class="fu">lm</span>(res_death_no_age <span class="sc">~</span> res_repvs_no_age, covid_lab)</span>
<span id="cb11-13"><a></a></span>
<span id="cb11-14"><a></a><span class="co"># Mutliple regression</span></span>
<span id="cb11-15"><a></a><span class="fu">coef</span>(m2)[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>rep_voteshare_std 
         0.230745 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a><span class="co"># Residualized regression</span></span>
<span id="cb13-2"><a></a><span class="fu">coef</span>(m2_res)[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>res_repvs_no_age 
        0.230745 </code></pre>
</div>
</div>
</div>
<div id="tabset-2-3">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="co"># 1. Regressing `new_deaths_pc_14da` on `med_age_std` and med_income_std</span></span>
<span id="cb15-2"><a></a>m3_death_by_age_income <span class="ot">&lt;-</span> <span class="fu">lm</span>(new_deaths_pc_14day <span class="sc">~</span> med_age_std <span class="sc">+</span> med_income_std, covid_lab)</span>
<span id="cb15-3"><a></a><span class="co"># Save residuals</span></span>
<span id="cb15-4"><a></a>covid_lab<span class="sc">$</span>res_death_no_age_income <span class="ot">&lt;-</span> <span class="fu">resid</span>(m3_death_by_age_income)</span>
<span id="cb15-5"><a></a></span>
<span id="cb15-6"><a></a><span class="co"># 2. Regressing `rep_voteshare_std` on `med_age_std` and med_income_std</span></span>
<span id="cb15-7"><a></a>m3_repvs_by_age_income <span class="ot">&lt;-</span> <span class="fu">lm</span>(rep_voteshare_std <span class="sc">~</span> med_age_std <span class="sc">+</span> med_income_std, covid_lab)</span>
<span id="cb15-8"><a></a><span class="co"># Save residuals</span></span>
<span id="cb15-9"><a></a>covid_lab<span class="sc">$</span>res_repvs_no_age_income <span class="ot">&lt;-</span> <span class="fu">resid</span>(m3_repvs_by_age_income)</span>
<span id="cb15-10"><a></a></span>
<span id="cb15-11"><a></a><span class="co"># 3. Residualized regression of deaths on Rep Vote Share</span></span>
<span id="cb15-12"><a></a>m3_res <span class="ot">&lt;-</span> <span class="fu">lm</span>(res_death_no_age_income <span class="sc">~</span> res_repvs_no_age_income, covid_lab)</span>
<span id="cb15-13"><a></a></span>
<span id="cb15-14"><a></a><span class="co"># multiple regression coefficient</span></span>
<span id="cb15-15"><a></a><span class="fu">coef</span>(m3)[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>rep_voteshare_std 
       0.07140446 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="co"># Same as  residualized regression coefficient</span></span>
<span id="cb17-2"><a></a><span class="fu">coef</span>(m3_res)[<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>res_repvs_no_age_income 
             0.07140446 </code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="why-did-the-coefficient-on-rep-vote-share-change-in-m3-but-not-m2" class="slide level2 center">
<h2>Why did the coefficient on Rep Vote Share change in <code>m3</code> but not <code>m2</code>?</h2>
</section>
<section id="section-6" class="slide level2 smaller">
<h2></h2>
</section>
<section id="section-7" class="slide level2 smaller">
<h2></h2>
<div class="cell">
<div class="cell-output-display">
<table class="texreg caption-top" data-quarto-postprocess="true" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;caption-side: bottom;color: #000000;border-top: 2px solid #000000;">
<caption>Statistical models</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">&nbsp;</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px; border-bottom: 1px solid #000000">DV: Death</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">&nbsp;</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">Baseline</th>
</tr>
</thead>
<tbody>
<tr class="odd" style="border-top: 1px solid #000000;">
<td style="padding-left: 5px; padding-right: 5px">(Intercept)</td>
<td style="padding-left: 5px; padding-right: 5px">0.57<sup>***</sup></td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
</tr>
<tr class="odd">
<td style="padding-left: 5px; padding-right: 5px">rep_voteshare_std</td>
<td style="padding-left: 5px; padding-right: 5px">0.23<sup>***</sup></td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
</tr>
<tr class="odd" style="border-top: 1px solid #000000;">
<td style="padding-left: 5px; padding-right: 5px">R<sup>2</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.31</td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">Adj. R<sup>2</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.29</td>
</tr>
<tr class="odd" style="border-bottom: 2px solid #000000;">
<td style="padding-left: 5px; padding-right: 5px">Num. obs.</td>
<td style="padding-left: 5px; padding-right: 5px">51</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td colspan="2" style="font-size: 0.8em"><sup>***</sup>p &lt; 0.001; <sup>**</sup>p &lt; 0.01; <sup>*</sup>p &lt; 0.05</td>
</tr>
</tfoot>

</table>
</div>
</div>
</section>
<section id="section-8" class="slide level2">
<h2></h2>
<p><span class="math display">\[
\text{Covid-19 Deaths} = \beta_0 + \beta_1 \text{Rep Vote Share}
\]</span></p>

<img data-src="07-slides_files/figure-revealjs/venn_iv1-1.png" width="960" class="r-stretch"></section>
<section id="section-9" class="slide level2 smaller">
<h2></h2>
<div class="cell">
<div class="cell-output-display">
<table class="texreg caption-top" data-quarto-postprocess="true" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;caption-side: bottom;color: #000000;border-top: 2px solid #000000;">
<caption>Statistical models</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">&nbsp;</th>
<th colspan="3" data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px; border-bottom: 1px solid #000000">DV: Death</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px; border-bottom: 1px solid #000000">DV: Vote Share</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px; border-bottom: 1px solid #000000">DV: Res. Deaths</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">&nbsp;</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">Baseline</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">Mutliple</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">Age</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">Vote Share</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">Deaths</th>
</tr>
</thead>
<tbody>
<tr class="odd" style="border-top: 1px solid #000000;">
<td style="padding-left: 5px; padding-right: 5px">(Intercept)</td>
<td style="padding-left: 5px; padding-right: 5px">0.57<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.57<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.57<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">-0.00</td>
<td style="padding-left: 5px; padding-right: 5px">-0.00</td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.06)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.14)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
</tr>
<tr class="odd">
<td style="padding-left: 5px; padding-right: 5px">rep_voteshare_std</td>
<td style="padding-left: 5px; padding-right: 5px">0.23<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.23<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
</tr>
<tr class="odd">
<td style="padding-left: 5px; padding-right: 5px">med_age_std</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">0.03</td>
<td style="padding-left: 5px; padding-right: 5px">0.00</td>
<td style="padding-left: 5px; padding-right: 5px">-0.12</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.06)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.14)</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
</tr>
<tr class="odd">
<td style="padding-left: 5px; padding-right: 5px">res_repvs_no_age</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">0.23<sup>***</sup></td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
</tr>
<tr class="odd" style="border-top: 1px solid #000000;">
<td style="padding-left: 5px; padding-right: 5px">R<sup>2</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.31</td>
<td style="padding-left: 5px; padding-right: 5px">0.31</td>
<td style="padding-left: 5px; padding-right: 5px">0.00</td>
<td style="padding-left: 5px; padding-right: 5px">0.02</td>
<td style="padding-left: 5px; padding-right: 5px">0.31</td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">Adj. R<sup>2</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.29</td>
<td style="padding-left: 5px; padding-right: 5px">0.28</td>
<td style="padding-left: 5px; padding-right: 5px">-0.02</td>
<td style="padding-left: 5px; padding-right: 5px">-0.00</td>
<td style="padding-left: 5px; padding-right: 5px">0.30</td>
</tr>
<tr class="odd" style="border-bottom: 2px solid #000000;">
<td style="padding-left: 5px; padding-right: 5px">Num. obs.</td>
<td style="padding-left: 5px; padding-right: 5px">51</td>
<td style="padding-left: 5px; padding-right: 5px">51</td>
<td style="padding-left: 5px; padding-right: 5px">51</td>
<td style="padding-left: 5px; padding-right: 5px">51</td>
<td style="padding-left: 5px; padding-right: 5px">51</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td colspan="6" style="font-size: 0.8em"><sup>***</sup>p &lt; 0.001; <sup>**</sup>p &lt; 0.01; <sup>*</sup>p &lt; 0.05</td>
</tr>
</tfoot>

</table>
</div>
</div>
</section>
<section id="section-10" class="slide level2">
<h2></h2>
<p><span class="math display">\[
\text{Deaths} = \beta_0 + \beta_1 \text{Rep VS} + \beta_2 \text{Age}
\]</span></p>

<img data-src="07-slides_files/figure-revealjs/venn_iv2-1.png" width="960" class="r-stretch"><p><span class="math inline">\(\beta_1\)</span> doesn’t change because <code>age</code> has no relationship to <code>deaths</code> in these data</p>
</section>
<section id="section-11" class="slide level2 smaller">
<h2></h2>
<div class="cell">
<div class="cell-output-display">
<table class="texreg caption-top" data-quarto-postprocess="true" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;caption-side: bottom;color: #000000;border-top: 2px solid #000000;">
<caption>Statistical models</caption>
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">&nbsp;</th>
<th colspan="3" data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px; border-bottom: 1px solid #000000">DV: Death</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px; border-bottom: 1px solid #000000">DV: Vote Share</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px; border-bottom: 1px solid #000000">DV: Res. Death</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">&nbsp;</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">Baseline</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">Full</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">No Rep</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">Vote Share</th>
<th data-quarto-table-cell-role="th" style="padding-left: 5px; padding-right: 5px">Deaths</th>
</tr>
</thead>
<tbody>
<tr class="odd" style="border-top: 1px solid #000000;">
<td style="padding-left: 5px; padding-right: 5px">(Intercept)</td>
<td style="padding-left: 5px; padding-right: 5px">0.57<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.57<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.57<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">-0.00</td>
<td style="padding-left: 5px; padding-right: 5px">0.00</td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.04)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.04)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.10)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.04)</td>
</tr>
<tr class="odd">
<td style="padding-left: 5px; padding-right: 5px">rep_voteshare_std</td>
<td style="padding-left: 5px; padding-right: 5px">0.23<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.07</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.07)</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
</tr>
<tr class="odd">
<td style="padding-left: 5px; padding-right: 5px">med_age_std</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">-0.02</td>
<td style="padding-left: 5px; padding-right: 5px">-0.03</td>
<td style="padding-left: 5px; padding-right: 5px">-0.22<sup>*</sup></td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.10)</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
</tr>
<tr class="odd">
<td style="padding-left: 5px; padding-right: 5px">med_income_std</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">-0.22<sup>**</sup></td>
<td style="padding-left: 5px; padding-right: 5px">-0.27<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">-0.74<sup>***</sup></td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.07)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.05)</td>
<td style="padding-left: 5px; padding-right: 5px">(0.10)</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
</tr>
<tr class="odd">
<td style="padding-left: 5px; padding-right: 5px">res_repvs_no_age_income</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">0.07</td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">&nbsp;</td>
<td style="padding-left: 5px; padding-right: 5px">(0.07)</td>
</tr>
<tr class="odd" style="border-top: 1px solid #000000;">
<td style="padding-left: 5px; padding-right: 5px">R<sup>2</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.31</td>
<td style="padding-left: 5px; padding-right: 5px">0.44</td>
<td style="padding-left: 5px; padding-right: 5px">0.43</td>
<td style="padding-left: 5px; padding-right: 5px">0.55</td>
<td style="padding-left: 5px; padding-right: 5px">0.02</td>
</tr>
<tr class="even">
<td style="padding-left: 5px; padding-right: 5px">Adj. R<sup>2</sup></td>
<td style="padding-left: 5px; padding-right: 5px">0.29</td>
<td style="padding-left: 5px; padding-right: 5px">0.40</td>
<td style="padding-left: 5px; padding-right: 5px">0.40</td>
<td style="padding-left: 5px; padding-right: 5px">0.53</td>
<td style="padding-left: 5px; padding-right: 5px">0.00</td>
</tr>
<tr class="odd" style="border-bottom: 2px solid #000000;">
<td style="padding-left: 5px; padding-right: 5px">Num. obs.</td>
<td style="padding-left: 5px; padding-right: 5px">51</td>
<td style="padding-left: 5px; padding-right: 5px">51</td>
<td style="padding-left: 5px; padding-right: 5px">51</td>
<td style="padding-left: 5px; padding-right: 5px">51</td>
<td style="padding-left: 5px; padding-right: 5px">51</td>
</tr>
</tbody><tfoot>
<tr class="odd">
<td colspan="6" style="font-size: 0.8em"><sup>***</sup>p &lt; 0.001; <sup>**</sup>p &lt; 0.01; <sup>*</sup>p &lt; 0.05</td>
</tr>
</tfoot>

</table>
</div>
</div>
</section>
<section id="section-12" class="slide level2">
<h2></h2>
<p><span class="math display">\[
\text{Deaths} = \beta_0 + \beta_1 \text{Rep VS} + \beta_2 \text{Age} + \beta_3 \text{Income}
\]</span></p>

<img data-src="07-slides_files/figure-revealjs/venn_iv3-1.png" width="960" class="r-stretch"><p><span class="math inline">\(\beta_1\)</span> decreases because after controlling for <code>income</code> there is less unique variation explained only by <code>republican vote share</code></p>
</section></section>
<section>
<section id="using-regression-to-make-predictions" class="title-slide slide level1 inverse center">
<h1><i class="fa-solid fa-lightbulb" aria-label="lightbulb"></i> Using regression to make predictions</h1>

</section>
<section id="using-regression-to-produce-predicted-values" class="slide level2 smaller">
<h2>Using regression to produce predicted values</h2>
<p>Coefficients in a regression define a formula which produces a predicted value of the outcome <span class="math inline">\(y\)</span> when the predictors <span class="math inline">\(X\)</span> take particular values.</p>
<p><span class="math display">\[
\begin{aligned}y &amp;= \overbrace{\beta_0 + \beta_1x_1 + \beta_2 x_2  + \dots \beta_j x_j}^{\text{Predictors}} + \underbrace{\epsilon}_{\text{Residuals}} &amp;\\
y &amp;= \beta_0 + \beta_1x_{rvs} + \beta_2x_{age}+ \beta_3x_{inc} + \epsilon &amp; \text{m3}\\
y &amp;= 0.56 + 0.07x_{rvs} - 0.02 x_{age} - 0.22 x_{inc} + \hat{\epsilon} &amp; \text{estimated m3}\\
y &amp;= 0.56 + 0.07(-0.87) - 0.02(0.62) - 0.22(0.38) + \hat{\epsilon} &amp; \text{prediction for RI} \\
\overbrace{0.22}^{\text{Observed}} &amp;= \underbrace{0.41}_{\text{Predicted}} + \overbrace{(-0.19)}^{\text{Residual}} &amp;
\end{aligned}
\]</span></p>
</section>
<section id="producing-predicted-values-in-r" class="slide level2 smaller">
<h2>Producing Predicted Values in R</h2>
<p>The basic steps to producing predicted values in R as follows:</p>
<ul>
<li class="fragment">Fit a model using <code>lm()</code></li>
<li class="fragment">Create a <span class="blue">prediction data frame</span> using <code>expand_grid()</code>:
<ul>
<li class="fragment"><span class="blue">vary</span> the values of <span class="blue">the predictor</span> you’re interested in</li>
<li class="fragment"><span class="blue">hold</span> all the other predictors in your model <span class="blue">constant</span> at some typical value.</li>
</ul></li>
<li class="fragment">Input the <span class="blue">model</span> from <code>lm()</code> and the <span class="blue">prediction data frame</span>, into the <code>predict()</code> function to obtain <span class="blue">predicted values</span>.
<ul>
<li class="fragment">Save predictions as a new column in your <span class="blue">prediction data frame</span> (I generally call them <code>fit</code>)</li>
</ul></li>
<li class="fragment">Plot predicted values in your <span class="blue">prediction data frame</span> to help interpret your model</li>
</ul>
</section>
<section id="section-13" class="slide level2 smaller">
<h2></h2>
<h4 id="are-there-decreasing-returns-to-vaccination">Are there decreasing returns to vaccination?</h4>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1">Task</a></li><li><a href="#tabset-3-2"><i class="fa-solid fa-code" aria-label="code"></i> m4</a></li><li><a href="#tabset-3-3"><i class="fa-solid fa-table" aria-label="table"></i> Table</a></li><li><a href="#tabset-3-4"><i class="fa-solid fa-code" aria-label="code"></i> Predict</a></li><li><a href="#tabset-3-5"><i class="fa-solid fa-chart-line" aria-label="chart-line"></i> Fig</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<p>Suppose we thought the <span class="blue">marginal effect</span> – (here, predicted change in deaths from a 1 percent increase in the percent of the population vaccinated) of vaccines varied.</p>
<p>There might be large gains from going to low to average rates of vaccination, but after a certain threshold, the decreases in deaths would taper off.</p>
<p>We could test this by including a <span class="blue">polynomial term</span> <code>I(percent_vaccinated)^2</code> in our model.</p>
<p>Including a polynomial term, allows the marginal effect to vary, based on the value of the predictor.</p>
<p>It’s hard to interpret the coefficients on <span class="blue">polynomial terms</span> (or interaction terms) just by looking at coefficients in a table</p>
<p>Instead, we’ll produce a plot of predicted values to test these claims</p>
</div>
<div id="tabset-3-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>m4 <span class="ot">&lt;-</span> <span class="fu">lm</span>(new_deaths_pc_14day <span class="sc">~</span> percent_vaccinated <span class="sc">+</span> <span class="fu">I</span>(percent_vaccinated<span class="sc">^</span><span class="dv">2</span>) <span class="sc">+</span> rep_voteshare_std <span class="sc">+</span> med_age_std <span class="sc">+</span> med_income_std, covid_lab</span>
<span id="cb19-2"><a></a>           )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-3">
<table class="texreg" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;caption-side: bottom;color: #000000;border-top: 2px solid #000000;">
<caption>
Statistical models
</caption>
<thead>
<tr>
<th style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</th>
<th style="padding-left: 5px;padding-right: 5px;">
Model 1
</th>
</tr>
</thead>
<tbody>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
(Intercept)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
6.194<sup>**</sup>
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(2.186)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
percent_vaccinated
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.169<sup>*</sup>
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.077)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
percent_vaccinated^2
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.001
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.001)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
rep_voteshare_std
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.062
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.081)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
med_age_std
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.053
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.053)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
med_income_std
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.114
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.068)
</td>
</tr>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
R<sup>2</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.561
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Adj. R<sup>2</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.512
</td>
</tr>
<tr style="border-bottom: 2px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
Num. obs.
</td>
<td style="padding-left: 5px;padding-right: 5px;">
51
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="font-size: 0.8em;" colspan="2">
<sup>***</sup>p &lt; 0.001; <sup>**</sup>p &lt; 0.01; <sup>*</sup>p &lt; 0.05
</td>
</tr>
</tfoot>
</table>
</div>
<div id="tabset-3-4">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a>pred_df <span class="ot">&lt;-</span> <span class="fu">expand_grid</span>(</span>
<span id="cb20-2"><a></a>  <span class="at">percent_vaccinated =</span> <span class="fu">sort</span>(<span class="fu">unique</span>(covid_lab<span class="sc">$</span>percent_vaccinated)),</span>
<span id="cb20-3"><a></a>  <span class="co"># Set standardized predictors to their means of 0</span></span>
<span id="cb20-4"><a></a>  <span class="at">rep_voteshare_std =</span> <span class="dv">0</span>,</span>
<span id="cb20-5"><a></a>  <span class="at">med_age_std =</span> <span class="dv">0</span>,</span>
<span id="cb20-6"><a></a>  <span class="at">med_income_std =</span> <span class="dv">0</span></span>
<span id="cb20-7"><a></a>)</span>
<span id="cb20-8"><a></a></span>
<span id="cb20-9"><a></a>pred_df<span class="sc">$</span>fit <span class="ot">&lt;-</span> <span class="fu">predict</span>(m4, <span class="at">newdata =</span> pred_df)</span>
<span id="cb20-10"><a></a></span>
<span id="cb20-11"><a></a>pred_df <span class="sc">%&gt;%</span> </span>
<span id="cb20-12"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(percent_vaccinated, fit))<span class="sc">+</span></span>
<span id="cb20-13"><a></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb20-14"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb20-15"><a></a>    <span class="at">y =</span> <span class="st">"Predicted Covid-19 Deaths</span><span class="sc">\n</span><span class="st">(per capita, 14-day average)"</span>,</span>
<span id="cb20-16"><a></a>    <span class="at">x =</span> <span class="st">"Percent of State's population that's Vaccinated"</span></span>
<span id="cb20-17"><a></a>  ) <span class="sc">+</span> </span>
<span id="cb20-18"><a></a>  <span class="fu">theme_minimal</span>() <span class="ot">-&gt;</span> fig_m4</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-5">
<p>For a typical state, early increases in vaccination rate are associated with larger declines in predicted deaths from Covid-19</p>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="07-slides_files/figure-revealjs/unnamed-chunk-25-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section></section>
<section>
<section id="evaluating-model-fit" class="title-slide slide level1 inverse center">
<h1><i class="fa-solid fa-lightbulb" aria-label="lightbulb"></i> Evaluating Model Fit</h1>

</section>
<section id="evaluating-model-fit-1" class="slide level2">
<h2>Evaluating Model Fit</h2>
<p>Models partition variance. We can summarize the overall fit of our model using measures like <span class="math inline">\(R^2\)</span></p>
<p><span class="math display">\[R^2 = \frac{\text{variance(predicted values )}}{ \text{variance(observed values )}}\]</span></p>
</section>
<section id="r2" class="slide level2">
<h2>R^2</h2>
<p>More formally, you’ll see <span class="math inline">\(R^2\)</span> defined in terms of “Sums of Squares”</p>
<ul>
<li class="fragment">TSS = <span class="blue">Total Sum of Squares</span> = Variance of the Outcome</li>
<li class="fragment">ESS = <span class="blue">Explained Sum of Squares</span> = Variance of the Predicted Values</li>
<li class="fragment">RSS = <span class="blue">Sum of Squared Residuals</span> = Variance of the Residuals</li>
</ul>
<p><span class="math display">\[R^2 = \frac{ESS}{TSS}= 1 - \frac{RSS}{TSS}\]</span></p>
</section>
<section id="calculating-r2-in-r" class="slide level2 smaller">
<h2>Calculating <span class="math inline">\(R^2\)</span> in R</h2>
<p>We could do it by hand, finding that our model explained about 43 percent of the observed variation deaths.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a><span class="co"># ESS / TSS</span></span>
<span id="cb21-2"><a></a><span class="fu">var</span>(m3<span class="sc">$</span>fitted.values)<span class="sc">/</span><span class="fu">var</span>(m3<span class="sc">$</span>model<span class="sc">$</span>new_deaths_pc_14day)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4393655</code></pre>
</div>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a><span class="co"># 1 - RSS/TSS</span></span>
<span id="cb23-2"><a></a><span class="dv">1</span> <span class="sc">-</span> <span class="fu">var</span>(m3<span class="sc">$</span>residuals)<span class="sc">/</span><span class="fu">var</span>(m3<span class="sc">$</span>model<span class="sc">$</span>new_deaths_pc_14day)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4393655</code></pre>
</div>
</div>
<p>But generally we let the <code>summary()</code> function do it for us:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a><span class="fu">summary</span>(m3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = new_deaths_pc_14day ~ rep_voteshare_std + med_age_std + 
    med_income_std, data = covid_lab)

Residuals:
     Min       1Q   Median       3Q      Max 
-0.50751 -0.19703 -0.06278  0.20024  0.92320 

Coefficients:
                  Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)        0.56561    0.04425  12.782  &lt; 2e-16 ***
rep_voteshare_std  0.07140    0.06654   1.073  0.28869    
med_age_std       -0.01692    0.04744  -0.357  0.72296    
med_income_std    -0.21669    0.06660  -3.254  0.00211 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.316 on 47 degrees of freedom
Multiple R-squared:  0.4394,    Adjusted R-squared:  0.4036 
F-statistic: 12.28 on 3 and 47 DF,  p-value: 4.689e-06</code></pre>
</div>
</div>
</section>
<section id="adjusted-r2" class="slide level2 smaller">
<h2>Adjusted <span class="math inline">\(R^2\)</span></h2>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1">Adjusted <span class="math inline">\(R^2\)</span></a></li><li><a href="#tabset-4-2"><i class="fa-solid fa-code" aria-label="code"></i> Example</a></li><li><a href="#tabset-4-3"><i class="fa-solid fa-chart-line" aria-label="chart-line"></i> Figure</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1">
<ul>
<li><p>One can show that a models <span class="math inline">\(R^2\)</span> <span class="blue">always increases</span> as we <span class="blue">add predictors</span>, even when they’re unrelated to the outcome</p></li>
<li><p>The <span class="blue">adjusted <span class="math inline">\(R^2\)</span></span> adjusts for this by weighting the <span class="math inline">\(R^2\)</span> of a model by the number of predictors</p></li>
</ul>
<p><span class="math display">\[\text{adj. }R^2 = 1 - \frac{RSS/(n-k)}{TSS/(n-1)}\]</span></p>
</div>
<div id="tabset-4-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>ex_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb27-2"><a></a>  <span class="at">y =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>) </span>
<span id="cb27-3"><a></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a></a>    <span class="fu">bind_cols</span>(</span>
<span id="cb27-5"><a></a>      <span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="fu">rnorm</span>(<span class="dv">10000</span>), <span class="at">ncol=</span><span class="dv">100</span>))</span>
<span id="cb27-6"><a></a>    ) <span class="sc">%&gt;%</span> janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb27-7"><a></a></span>
<span id="cb27-8"><a></a></span>
<span id="cb27-9"><a></a>the_formulas <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb27-10"><a></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">51</span>){</span>
<span id="cb27-11"><a></a>  vars <span class="ot">&lt;-</span> <span class="fu">names</span>(ex_df)[<span class="dv">2</span><span class="sc">:</span>i]</span>
<span id="cb27-12"><a></a>  the_formulas[[i<span class="dv">-1</span>]] <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"y~"</span>,<span class="fu">paste</span>(vars,<span class="at">collapse =</span> <span class="st">"+"</span>))</span>
<span id="cb27-13"><a></a>}</span>
<span id="cb27-14"><a></a></span>
<span id="cb27-15"><a></a>the_formulas <span class="sc">%&gt;%</span> </span>
<span id="cb27-16"><a></a>  purrr<span class="sc">::</span><span class="fu">map</span>(as.formula) <span class="sc">%&gt;%</span> </span>
<span id="cb27-17"><a></a>  purrr<span class="sc">::</span><span class="fu">map</span>(lm, <span class="at">data=</span>ex_df) <span class="sc">%&gt;%</span> </span>
<span id="cb27-18"><a></a>  purrr<span class="sc">::</span><span class="fu">map</span>(summary) <span class="sc">%&gt;%</span> </span>
<span id="cb27-19"><a></a>  purrr<span class="sc">::</span><span class="fu">map_df</span>(glance) <span class="ot">-&gt;</span> r2_df</span>
<span id="cb27-20"><a></a></span>
<span id="cb27-21"><a></a>r2_df <span class="sc">%&gt;%</span> </span>
<span id="cb27-22"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(df, r.squared))<span class="sc">+</span></span>
<span id="cb27-23"><a></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">col =</span> <span class="st">"R^2"</span>))<span class="sc">+</span></span>
<span id="cb27-24"><a></a>  <span class="fu">geom_line</span>()<span class="sc">+</span></span>
<span id="cb27-25"><a></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">y=</span>adj.r.squared,<span class="at">col =</span> <span class="st">"Adjusted R^2"</span>))<span class="sc">+</span></span>
<span id="cb27-26"><a></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y=</span>adj.r.squared))<span class="sc">+</span></span>
<span id="cb27-27"><a></a>  <span class="fu">labs</span>(</span>
<span id="cb27-28"><a></a>    <span class="at">x =</span> <span class="st">"Number of predictors"</span>,</span>
<span id="cb27-29"><a></a>    <span class="at">y =</span> <span class="st">"Proportion of Variance Explained"</span>,</span>
<span id="cb27-30"><a></a>    <span class="at">title =</span> <span class="st">"Adding unrelated predictors increases a model's R^2</span><span class="sc">\n</span><span class="st">while the Adjusted R^2 provides a better indicator of poor fit "</span>,</span>
<span id="cb27-31"><a></a>    <span class="at">col =</span><span class="st">"Model fit"</span></span>
<span id="cb27-32"><a></a>  ) <span class="ot">-&gt;</span> fig_r2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-3">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="07-slides_files/figure-revealjs/unnamed-chunk-29-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-14" class="slide level2 smaller">
<h2></h2>
<h4 id="using-r2-to-compare-models">Using <span class="math inline">\(R^2\)</span> to compare models</h4>
<div class="panel-tabset">
<ul id="tabset-5" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-5-1">ANOVA</a></li><li><a href="#tabset-5-2"><i class="fa-solid fa-code" aria-label="code"></i> m5</a></li><li><a href="#tabset-5-3"><i class="fa-solid fa-table" aria-label="table"></i> Table</a></li><li><a href="#tabset-5-4"><i class="fa-solid fa-code" aria-label="code"></i> Anova</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1">
<p>When models are <em>nested</em> (larger models contain all the predictors of smaller models), we can ask, does including the additional predictors in the larger model explain more variation in the outcome than we would expect would happen if we just added additional, random variable.</p>
<p>Formally we call this process an <a href="https://towardsdatascience.com/anova-for-regression-fdb49cf5d684#:~:text=It%20is%20the%20same%20as,or%20more%20categorical%20predictor%20variables." target="_blank">Analysis of Variance (ANOVA)</a></p>
<p>Let’s assess the added predictive power of <code>I(percent_vaccinated^2)</code> by estimating a model without it and comparing models using ANOVA</p>
</div>
<div id="tabset-5-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a><span class="co"># Estimate model without polynomial</span></span>
<span id="cb28-2"><a></a>m5 <span class="ot">&lt;-</span> <span class="fu">lm</span>(new_deaths_pc_14day <span class="sc">~</span> percent_vaccinated  <span class="sc">+</span> rep_voteshare_std <span class="sc">+</span> med_age_std <span class="sc">+</span> med_income_std, covid_lab</span>
<span id="cb28-3"><a></a>           )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-5-3">
<table class="texreg" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;caption-side: bottom;color: #000000;border-top: 2px solid #000000;">
<caption>
Statistical models
</caption>
<thead>
<tr>
<th style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</th>
<th style="padding-left: 5px;padding-right: 5px;">
Model 1
</th>
<th style="padding-left: 5px;padding-right: 5px;">
Model 2
</th>
</tr>
</thead>
<tbody>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
(Intercept)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
6.194<sup>**</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
2.532<sup>***</sup>
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(2.186)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.657)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
percent_vaccinated
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.169<sup>*</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.035<sup>**</sup>
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.077)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.012)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
percent_vaccinated^2
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.001
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.001)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
rep_voteshare_std
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.062
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.089
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.081)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.082)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
med_age_std
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.053
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.071
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.053)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.053)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
med_income_std
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.114
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.119
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.068)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.070)
</td>
</tr>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
R<sup>2</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.561
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.531
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Adj. R<sup>2</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.512
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.490
</td>
</tr>
<tr style="border-bottom: 2px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
Num. obs.
</td>
<td style="padding-left: 5px;padding-right: 5px;">
51
</td>
<td style="padding-left: 5px;padding-right: 5px;">
51
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="font-size: 0.8em;" colspan="3">
<sup>***</sup>p &lt; 0.001; <sup>**</sup>p &lt; 0.01; <sup>*</sup>p &lt; 0.05
</td>
</tr>
</tfoot>
</table>
</div>
<div id="tabset-5-4">
<p>The anova suggests that including a polynomial provides a <em>marginal</em> improvement to fit (p &lt; 0.10)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a><span class="fu">anova</span>(m5, m4)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Analysis of Variance Table

Model 1: new_deaths_pc_14day ~ percent_vaccinated + rep_voteshare_std + 
    med_age_std + med_income_std
Model 2: new_deaths_pc_14day ~ percent_vaccinated + I(percent_vaccinated^2) + 
    rep_voteshare_std + med_age_std + med_income_std
  Res.Df    RSS Df Sum of Sq      F  Pr(&gt;F)  
1     46 3.9268                              
2     45 3.6758  1   0.25098 3.0725 0.08644 .
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="section-15" class="slide level2 smaller">
<h2></h2>
<h4 id="standardized-vs-non-standardized-predictors">Standardized vs Non Standardized Predictors</h4>
<div class="panel-tabset">
<ul id="tabset-6" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-6-1"><i class="fa-solid fa-light-bulb" aria-label="light-bulb"></i></a></li><li><a href="#tabset-6-2"><i class="fa-solid fa-code" aria-label="code"></i> m6</a></li><li><a href="#tabset-6-3"><i class="fa-solid fa-table" aria-label="table"></i> Table</a></li><li><a href="#tabset-6-4"><i class="fa-solid fa-code" aria-label="code"></i> Comments</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1">
<p>Why are we using standardized predictors?</p>
<p>Standardizing variables is a common transformation:</p>
<p><span class="math display">\[z\text{-scores of x} = \frac{x_i - \mu_{x}}{\sigma_x}\]</span> When variables are measured on very different scales or units (e.g.&nbsp;age in years, income in dollars), using standardized (or normalized) versions rescales them to a unit-less measures that all have:</p>
<ul>
<li class="fragment">a mean of <code>zero</code></li>
<li class="fragment">a standard deviation of <code>1</code></li>
</ul>
</div>
<div id="tabset-6-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a><span class="co"># Estimate model  with unstandardized predictors</span></span>
<span id="cb31-2"><a></a>m6 <span class="ot">&lt;-</span> <span class="fu">lm</span>(new_deaths_pc_14day <span class="sc">~</span> percent_vaccinated  <span class="sc">+</span> rep_voteshare <span class="sc">+</span> med_age <span class="sc">+</span> med_income, covid_lab</span>
<span id="cb31-3"><a></a>           )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-6-3">
<table class="texreg" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;caption-side: bottom;color: #000000;border-top: 2px solid #000000;">
<caption>
Statistical models
</caption>
<thead>
<tr>
<th style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</th>
<th style="padding-left: 5px;padding-right: 5px;">
Model 1
</th>
<th style="padding-left: 5px;padding-right: 5px;">
Model 2
</th>
</tr>
</thead>
<tbody>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
(Intercept)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
2.532<sup>***</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
2.470<sup>*</sup>
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.657)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(1.063)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
percent_vaccinated
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.035<sup>**</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.035<sup>**</sup>
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.012)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.012)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
rep_voteshare_std
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.089
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.082)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
med_age_std
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.071
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.053)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
med_income_std
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.119
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.070)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
rep_voteshare
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.007
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.007)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
med_age
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.029
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.022)
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
med_income
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-0.000
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
<td style="padding-left: 5px;padding-right: 5px;">
(0.000)
</td>
</tr>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
R<sup>2</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.531
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.531
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Adj. R<sup>2</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.490
</td>
<td style="padding-left: 5px;padding-right: 5px;">
0.490
</td>
</tr>
<tr style="border-bottom: 2px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
Num. obs.
</td>
<td style="padding-left: 5px;padding-right: 5px;">
51
</td>
<td style="padding-left: 5px;padding-right: 5px;">
51
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="font-size: 0.8em;" colspan="3">
<sup>***</sup>p &lt; 0.001; <sup>**</sup>p &lt; 0.01; <sup>*</sup>p &lt; 0.05
</td>
</tr>
</tfoot>
</table>
</div>
<div id="tabset-6-4">
<p>When should you standardize variables? It depends on what you’re trying to do.</p>
<ul>
<li class="fragment">It’s the same information, just rescaled:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a><span class="fu">coef</span>(m5)[<span class="dv">5</span>] <span class="co"># Standardized coef</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>med_income_std 
    -0.1188812 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a><span class="fu">coef</span>(m6)[<span class="dv">5</span>] <span class="co"># Unstandaried</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  med_income 
-1.10947e-05 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a><span class="fu">coef</span>(m6)[<span class="dv">5</span>]<span class="sc">*</span><span class="fu">sd</span>(covid_lab<span class="sc">$</span>med_income) <span class="co"># Same as standardized</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>med_income 
-0.1188812 </code></pre>
</div>
</div>
<ul>
<li class="fragment"><p>Can facilitate comparison and estimation</p></li>
<li class="fragment"><p>Might make interpretation easier (but the onus is on you to describe your models well)</p>
<ul>
<li class="fragment">Don’t standardized binary predictors</li>
</ul></li>
</ul>
</div>
</div>
</div>
</section></section>
<section>
<section id="difference-in-differences" class="title-slide slide level1 inverse center">
<h1><i class="fa-solid fa-lightbulb" aria-label="lightbulb"></i> Difference-in-Differences</h1>

</section>
<section id="motivating-example-what-causes-cholera" class="slide level2 smaller" data-background-image="https://www.finebooksmagazine.com/sites/default/files/styles/gallery_item/public/media-images/2020-11/map-lead-4.jpg?h=2ded5a3f&amp;itok=Mn-K5rQc," data-background-opacity=".3">
<h2>Motivating Example: What causes Cholera?</h2>
<ul>
<li class="fragment"><p>In the 1800s, cholera was thought to be transmitted through the air.</p></li>
<li class="fragment"><p>John Snow (the physician, not the snack), to explore the origins eventunally concluding that cholera was transmitted through living organisms in water.</p></li>
<li class="fragment"><p>Leveraged a <strong>natural experiment</strong> in which one water company in London moved its pipes further upstream (reducing contamination for Lambeth), while other companies kept their pumps serving Southwark and Vauxhall in the same location.</p></li>
</ul>
</section>
<section id="notation" class="slide level2 smaller">
<h2>Notation</h2>
<p>Let’s adopt a little notation to help us think about the logic of Snow’s design:</p>
<ul>
<li class="fragment"><p><span class="math inline">\(D\)</span>: treatment indicator, 1 for treated neighborhoods (Lambeth), 0 for control neighborhoods (Southwark and Vauxhall)</p></li>
<li class="fragment"><p><span class="math inline">\(T\)</span>: period indicator, 1 if post treatment (1854), 0 if pre-treatment (1849).</p></li>
<li class="fragment"><p><span class="math inline">\(Y_{di}(t)\)</span> the potential outcome of unit <span class="math inline">\(i\)</span></p>
<ul>
<li class="fragment"><p><span class="math inline">\(Y_{1i}(t)\)</span> the potential outcome of unit <span class="math inline">\(i\)</span> when treated between the two periods</p></li>
<li class="fragment"><p><span class="math inline">\(Y_{0i}(t)\)</span> the potential outcome of unit <span class="math inline">\(i\)</span> when control between the two periods</p></li>
</ul></li>
</ul>
</section>
<section id="causal-effects" class="slide level2 smaller">
<h2>Causal Effects</h2>
<p>The individual causal effect for unit i at time t is:</p>
<p><span class="math display">\[\tau_{it} = Y_{1i}(t) − Y_{0i}(t)\]</span></p>
<p>What we observe is</p>
<p><span class="math display">\[Y_i(t) = Y_{0i}(t)\cdot(1 − D_i(t)) + Y_{1i}(t)\cdot D_i(t)\]</span></p>
<p><span class="math inline">\(D\)</span> only equals 1, when <span class="math inline">\(T\)</span> equals 1, so we never observe <span class="math inline">\(Y_0i(1)\)</span> for the treated units.</p>
<p>In words, we don’t know what Lambeth’s outcome would have been in the second period, had they not been treated.</p>
</section>
<section id="average-treatment-on-treated" class="slide level2 smaller">
<h2>Average Treatment on Treated</h2>
<p>Our goal is to estimate the average effect of treatment on treated (ATT):</p>
<p><span class="math display">\[\tau_{ATT} = E[Y_{1i}(1) -  Y_{0i}(1)|D=1]\]</span></p>
<p>That is, what would have happened in Lambeth, had their water company not moved their pipes</p>
</section>
<section id="average-treatment-on-treated-1" class="slide level2 smaller">
<h2>Average Treatment on Treated</h2>
<p>Our goal is to estimate the average effect of treatment on treated (ATT):</p>
<p>We we can observe is:</p>
<table class="caption-top">
<colgroup>
<col style="width: 25%">
<col style="width: 50%">
<col style="width: 25%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>Pre-Period (T=0)</th>
<th>Post-Period (T=1)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Treated <span class="math inline">\(D_{i}=1\)</span></td>
<td><span class="math inline">\(E[Y_{0i}(0)\vert D_i = 1]\)</span></td>
<td><span class="math inline">\(E[Y_{1i}(1)\vert D_i = 1]\)</span></td>
</tr>
<tr class="even">
<td>Control <span class="math inline">\(D_i=0\)</span></td>
<td><span class="math inline">\(E[Y_{0i}(0)\vert D_i = 0]\)</span></td>
<td><span class="math inline">\(E[Y_{0i}(1)\vert D_i = 0]\)</span></td>
</tr>
</tbody>
</table>
</section>
<section id="data" class="slide level2 smaller">
<h2>Data</h2>
<p>Because potential outcomes notation is abstract, let’s consider a modified description of the Snow’s cholera death data from <a href="https://mixtape.scunning.com/difference-in-differences.html" target="_blank">Scott Cunningham</a>:</p>
<div class="cell">
<div class="cell-output-display">
<table class="caption-top">
<thead>
<tr class="header">
<th style="text-align: left;">Company</th>
<th style="text-align: right;">1849 (T=0)</th>
<th style="text-align: right;">1854 (T=1)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Lambeth (D=1)</td>
<td style="text-align: right;">85</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="even">
<td style="text-align: left;">Southwark and Vauxhall (D=0)</td>
<td style="text-align: right;">135</td>
<td style="text-align: right;">147</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="how-can-we-estimate-the-effect-of-moving-pumps-upstream" class="slide level2 smaller">
<h2>How can we estimate the effect of moving pumps upstream?</h2>
<p>Recall, our goal is to estimate the effect of the the treatment on the treated:</p>
<p><span class="math display">\[\tau_{ATT} = E[Y_{1i}(1) -  Y_{0i}(1)|D=1]\]</span></p>
<p>Let’s conisder some strategies Snow could take to estimate this quantity:</p>
</section>
<section id="before-vs-after-comparisons" class="slide level2 smaller">
<h2>Before vs after comparisons:</h2>
<ul>
<li><p>Snow could have compared Labmeth in 1854 <span class="math inline">\((E[Y_i(1)|D_i = 1] = 19)\)</span> to Lambeth in 1849 <span class="math inline">\((E[Y_i(0)|D_i = 1]=85)\)</span>, and claimed that moving the pumps upstream led to <strong>66 fewer cholera deaths.</strong></p></li>
<li><p>Assumes Lambeth’s pre-treatment outcomes in 1849 are a good proxy for what its outcomes would have been in 1954 if the pumps hadn’t moved <span class="math inline">\((E[Y_{0i}(1)|D_i = 1])\)</span>.</p></li>
<li><p>A skeptic might argue that Lambeth in 1849 <span class="math inline">\(\neq\)</span> Lambeth in 1854</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top" data-quarto-postprocess="true" style="margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Company</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1849 (T=0)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1854 (T=1)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left; font-weight: bold; color: blue !important;">Lambeth (D=1)</td>
<td style="text-align: right; font-weight: bold; color: blue !important;">85</td>
<td style="text-align: right; font-weight: bold; color: blue !important;">19</td>
</tr>
<tr class="even">
<td style="text-align: left;">Southwark and Vauxhall (D=0)</td>
<td style="text-align: right;">135</td>
<td style="text-align: right;">147</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="treatment-control-comparisons-in-the-post-period." class="slide level2 smaller">
<h2>Treatment-Control comparisons in the Post Period.</h2>
<ul>
<li><p>Snow could have compared outcomes between Lambeth and S&amp;V in 1954 (<span class="math inline">\(E[Yi(1)|Di = 1] − E[Yi(1)|Di = 0]\)</span>), concluding that the change in pump locations led to <strong>128 fewer deaths.</strong></p></li>
<li><p>Here the assumption is that the outcomes in S&amp;V and in 1854 provide a good proxy for what would have happened in Lambeth in 1954 had the pumps not been moved <span class="math inline">\((E[Y_{0i}(1)|D_i = 1])\)</span></p></li>
<li><p>Again, our skeptic could argue Lambeth <span class="math inline">\(\neq\)</span> S&amp;V</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">
<table class="table caption-top" data-quarto-postprocess="true" style="margin-left: auto; margin-right: auto;">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">Company</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1849 (T=0)</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">1854 (T=1)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Lambeth (D=1)</td>
<td style="text-align: right;">85</td>
<td style="text-align: right; font-weight: bold; color: red !important;">19</td>
</tr>
<tr class="even">
<td style="text-align: left;">Southwark and Vauxhall (D=0)</td>
<td style="text-align: right;">135</td>
<td style="text-align: right; font-weight: bold; color: red !important;">147</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="difference-in-differences-1" class="slide level2 smaller">
<h2>Difference in Differences</h2>
<p>To address these concerns, Snow employed what we now call a <span class="blue">difference-in-differences</span> design,</p>
<p>There are two, equivalent ways to view this design.</p>
<p><span class="math display">\[\underbrace{\{E[Y_{i}(1)|D_{i} = 1] − E[Y_{i}(1)|D_{i} = 0]\}}_{\text{1. Treat-Control |Post }}− \overbrace{\{E[Y_{i}(0)|D_{i} = 1] − E[Y_{i}(0)|D_{i}=0 ]}^{\text{Treated-Control|Pre}}\]</span></p>
<ul>
<li><p>Difference 1: Average change between Treated and Control in Post Period</p></li>
<li><p>Difference 2: Average change between Treated and Control in Pre Period</p></li>
</ul>
</section>
<section id="difference-in-differences-2" class="slide level2 smaller">
<h2>Difference in Differences</h2>
<p><span class="math display">\[\underbrace{\{E[Y_{i}(1)|D_{i} = 1] − E[Y_{i}(1)|D_{i} = 0]\}}_{\text{1. Treat-Control |Post }}− \overbrace{\{E[Y_{i}(0)|D_{i} = 1] − E[Y_{i}(0)|D_{i}=0 ]}^{\text{Treated-Control|Pre}}\]</span> Is equivalent to:</p>
<p><span class="math display">\[\underbrace{\{E[Y_{i}(1)|D_{i} = 1] − E[Y_{i}(0)|D_{i} = 1]\}}_{\text{Post - Pre |Treated }}− \overbrace{\{E[Y_{i}(1)|D_{i} = 0] − E[Y_{i}(0)|D_{i}=0 ]}^{\text{Post-Pre|Control}}\]</span></p>
<ul>
<li>Difference 1: Average change between Treated over time</li>
<li>Difference 2: Average change between Control over time</li>
</ul>
</section>
<section id="difference-in-differences-3" class="slide level2 smaller">
<h2>Difference in Differences</h2>
<p>You’ll see the DiD design represented both ways, but they produce the same result:</p>
<p><span class="math display">\[
\tau_{ATT} = (19-147) - (85-135) = -78
\]</span></p>
<p><span class="math display">\[
\tau_{ATT} = (19-85) - (147-135) = -78
\]</span></p>
</section>
<section id="identifying-assumption-of-a-difference-in-differences-design" class="slide level2 smaller">
<h2>Identifying Assumption of a Difference in Differences Design</h2>
<p>The key assumption in this design is what’s known as the parallel trends assumption: <span class="math inline">\(E[Y_{0i}(1) − Y_{0i}(0)|D_i = 1] = E[Y_{0i}(1) − Y_{0i}(0)|D_i = 0]\)</span></p>
<ul>
<li class="fragment">In words: If Lambeth hadn’t moved its pumps, it would have followed a similar path as S&amp;V</li>
</ul>
</section>
<section id="parallel-trends" class="slide level2">
<h2>Parallel Trends</h2>

<img data-src="07-slides_files/figure-revealjs/paralleltrends-1.png" width="960" class="r-stretch"></section>
<section id="using-linear-regression-to-estimate-a-difference-in-difference" class="slide level2 smaller">
<h2>Using linear regression to estimate a Difference in Difference</h2>
<div class="panel-tabset">
<ul id="tabset-7" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-7-1">Concept</a></li><li><a href="#tabset-7-2">Code</a></li><li><a href="#tabset-7-3">Data</a></li><li><a href="#tabset-7-4">DiD</a></li><li><a href="#tabset-7-5">Figure</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1">
<ul>
<li class="fragment">Recall that linear regression provides a…
<ul>
<li class="fragment">linear estimate of the conditional expectation function</li>
</ul></li>
<li class="fragment">In the canonincal pre-post, treated and control DiD, <span class="math inline">\(\beta_3\)</span> from the following linear regression will give us the ATT:</li>
</ul>
<div class="fragment">
<p><span class="math display">\[
y = \beta_0 + \beta_1 Post + \beta_2 Treated + \underbrace{\beta_3Post\times Treated}_{\tau_{ATT}}
\]</span></p>
</div>
</div>
<div id="tabset-7-2">
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a>cholera_df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb38-2"><a></a>  <span class="at">Period =</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">"Pre"</span>,<span class="st">"Pre"</span>,<span class="st">"Post"</span>,<span class="st">"Post"</span>),</span>
<span id="cb38-3"><a></a>                  <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Pre"</span>,<span class="st">"Post"</span>)),</span>
<span id="cb38-4"><a></a>  <span class="at">Year =</span> <span class="fu">c</span>(<span class="dv">1849</span>,<span class="dv">1849</span>, <span class="dv">1854</span>,<span class="dv">1854</span>),</span>
<span id="cb38-5"><a></a>  <span class="at">Treated =</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">"Control"</span>,<span class="st">"Treated"</span>,<span class="st">"Control"</span>,<span class="st">"Treated"</span>)),</span>
<span id="cb38-6"><a></a>  <span class="at">Company =</span> <span class="fu">c</span>(<span class="st">"S&amp;V"</span>,<span class="st">"Lambeth"</span>,<span class="st">"S&amp;V"</span>,<span class="st">"Lambeth"</span>),</span>
<span id="cb38-7"><a></a>  <span class="at">Deaths =</span> <span class="fu">c</span>(<span class="dv">135</span>,<span class="dv">85</span>,<span class="dv">147</span>,<span class="dv">19</span>)</span>
<span id="cb38-8"><a></a>)</span>
<span id="cb38-9"><a></a></span>
<span id="cb38-10"><a></a>m_did <span class="ot">&lt;-</span> <span class="fu">lm</span>(Deaths<span class="sc">~</span>Period <span class="sc">+</span> Treated <span class="sc">+</span> Period<span class="sc">:</span>Treated, cholera_df)</span>
<span id="cb38-11"><a></a></span>
<span id="cb38-12"><a></a>m_did</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Deaths ~ Period + Treated + Period:Treated, data = cholera_df)

Coefficients:
              (Intercept)                 PeriodPost  
                      135                         12  
           TreatedTreated  PeriodPost:TreatedTreated  
                      -50                        -78  </code></pre>
</div>
</div>
</div>
<div id="tabset-7-3">
<div class="cell">
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-6527a6496e8d93ef47c3" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-6527a6496e8d93ef47c3">{"x":{"filter":"none","vertical":false,"data":[["1","2","3","4"],["Pre","Pre","Post","Post"],[1849,1849,1854,1854],["Control","Treated","Control","Treated"],["S&amp;V","Lambeth","S&amp;V","Lambeth"],[135,85,147,19]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>Period<\/th>\n      <th>Year<\/th>\n      <th>Treated<\/th>\n      <th>Company<\/th>\n      <th>Deaths<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"columnDefs":[{"className":"dt-right","targets":[2,5]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"Period","targets":1},{"name":"Year","targets":2},{"name":"Treated","targets":3},{"name":"Company","targets":4},{"name":"Deaths","targets":5}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</div>
<div id="tabset-7-4">
<table class="texreg" style="margin: 10px auto;border-collapse: collapse;border-spacing: 0px;caption-side: bottom;color: #000000;border-top: 2px solid #000000;">
<caption>
Statistical models
</caption>
<thead>
<tr>
<th style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</th>
<th style="padding-left: 5px;padding-right: 5px;">
Model 1
</th>
</tr>
</thead>
<tbody>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
(Intercept)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
135.00
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Post (1854)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
12.00
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Treated (Lambeth)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-50.00
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Post X Treated (DID)
</td>
<td style="padding-left: 5px;padding-right: 5px;">
-78.00
</td>
</tr>
<tr style="border-top: 1px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
R<sup>2</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
1.00
</td>
</tr>
<tr>
<td style="padding-left: 5px;padding-right: 5px;">
Adj. R<sup>2</sup>
</td>
<td style="padding-left: 5px;padding-right: 5px;">
&nbsp;
</td>
</tr>
<tr style="border-bottom: 2px solid #000000;">
<td style="padding-left: 5px;padding-right: 5px;">
Num. obs.
</td>
<td style="padding-left: 5px;padding-right: 5px;">
4
</td>
</tr>
</tbody>
<tfoot>
<tr>
<td style="font-size: 0.8em;" colspan="2">
<sup>***</sup>p &lt; 0.001; <sup>**</sup>p &lt; 0.01; <sup>*</sup>p &lt; 0.05
</td>
</tr>
</tfoot>
</table>
</div>
<div id="tabset-7-5">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="07-slides_files/figure-revealjs/didfig-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
<ul>
<li><span class="math inline">\(\beta_0=\)</span> Outcome in control (S&amp;V) before treatment</li>
<li><span class="math inline">\(\beta_1=\)</span> Fixed, <span class="blue">unit invariant</span> differences between <span class="blue">pre</span> and <span class="blue">post</span> periods</li>
<li><span class="math inline">\(\beta_2=\)</span> Fixed, <span class="blue">time invariant</span> differences between <span class="blue">treated</span> and <span class="blue">control</span></li>
<li><span class="math inline">\(\beta_3=\)</span> <span class="blue">Difference-in-Differences</span> = <span class="math inline">\(E[Y_{1i}(1) -  Y_{0i}(1)|D=1]\)</span></li>
</ul>
</div>
</div>
</div>
</section>
<section id="summary" class="slide level2 smaller">
<h2>Summary</h2>
<ul>
<li class="fragment"><p>A <span class="blue">Difference in Differences</span> (DiD, or diff-in-diff) design combines a pre-post comparison, with a treated and control comparison</p></li>
<li class="fragment"><p>Differencing twice accounts for fixed differences <span class="blue">across units</span> and <span class="blue">between periods</span></p>
<ul>
<li class="fragment">But not time varying differences across units…</li>
</ul></li>
<li class="fragment"><p>The key identifying assumption of a DiD design is the assumption of <span class="blue">parallel trends</span></p>
<ul>
<li class="fragment">Absent treatment, treated and control groups would see the same changes over time.</li>
<li class="fragment">Hard to prove, possible to assess if we have multiple periods of pre-treatment observations</li>
</ul></li>
</ul>
</section>
<section id="generalizing-diff-in-diff-with-linear-regression" class="slide level2 smaller">
<h2>Generalizing Diff-in-Diff with Linear Regression</h2>
<ul>
<li class="fragment">Linear regression allows us to generalizes Diff-in-Diff to multiple periods and treatment interventions, with <span class="blue">fixed effects</span></li>
</ul>
<div class="fragment">
<p><span class="math display">\[
y_{it} = \overbrace{\alpha_i}^{\text{Unit FE}} + \underbrace{\gamma_t}_{\text{Period FE}} + \overbrace{\tau*d_{it}}^{\text{Treatment}} + \underbrace{X\beta}_{\text{Covariates}} + \epsilon_{it}
\]</span></p>
</div>
<ul>
<li class="fragment"><span class="blue">Unit fixed effects</span> <span class="math inline">\((\alpha_i)\)</span>control for time-invariant differences across units</li>
<li class="fragment"><span class="blue">Period fixed effects</span> <span class="math inline">\((\gamma_i)\)</span> control for unit-invariant differences across periods</li>
<li class="fragment"><span class="blue"><span class="math inline">\(\tau\)</span></span> corresponds the <span class="blue">Difference-in-Difference</span> estimate for a <span class="blue">two-way fixed effects</span> regression</li>
</ul>
</section>
<section id="extensions-and-limitations" class="slide level2 smaller">
<h2>Extensions and limitations</h2>
<ul>
<li class="fragment">Interpretation of <span class="blue">two-way fixed effects</span> DiD estimator is <span class="blue">complicated</span>…
<ul>
<li class="fragment"><span class="citation" data-cites="Goodman-Bacon2021-ah">Goodman-Bacon (<a href="#/references" role="doc-biblioref" onclick="">2021</a>)</span></li>
<li class="fragment"><span class="citation" data-cites="Callaway2021-av">Callaway and Sant’Anna (<a href="#/references" role="doc-biblioref" onclick="">2021</a>)</span></li>
</ul></li>
<li class="fragment">More pre-treatment periods allow you assess “parallel trends” assumption</li>
<li class="fragment">Alternative methods
<ul>
<li class="fragment">Synthetic control</li>
<li class="fragment">Event Study Designs</li>
</ul></li>
<li class="fragment">What if you have multiple treatments or treatments that come and go?
<ul>
<li class="fragment">Panel Matching</li>
<li class="fragment">Generalized Synthetic control</li>
</ul></li>
</ul>
</section>
<section id="applications" class="slide level2 smaller">
<h2>Applications</h2>
<ul>
<li class="fragment"><p><a href="https://www.nber.org/papers/w4509" target="_blank">Card and Krueger (1994)</a> What effect did raising the minimum wage in NJ have on employment</p></li>
<li class="fragment"><p><a href="https://onlinelibrary.wiley.com/doi/full/10.1111/ajps.12116?casa_token=_ceCu4SwzTEAAAAA%3AP9aeaZpT_Zh1VdWKXx_tEmzaJTtMJ1n0eG7EaYlvJZYN000re33cfMAI2O8N8htFJjOsln2GyVeQql4" target="_blank">Abadie, Diamond, &amp; Hainmueller (2014)</a> What effect did German Unification have on economic development in West Germany</p></li>
<li class="fragment"><p><a href="https://www.cambridge.org/core/journals/american-political-science-review/article/impact-of-recentralization-on-public-services-a-differenceindifferences-analysis-of-the-abolition-of-elected-councils-in-vietnam/3477854BAAFE152DC93C594169D64F58" target="_blank">Malesky, Nguyen and Tran (2014)</a> How does decentralization influence public services?</p></li>
</ul>
</section></section>
<section>
<section id="previewing-lab-7" class="title-slide slide level1 inverse center">
<h1><i class="fa-solid fa-code" aria-label="code"></i> Previewing Lab 7</h1>

</section>
<section id="replicating-grumbach-and-hill-2022" class="slide level2">
<h2>Replicating Grumbach and Hill (2022)</h2>
<ul>
<li class="fragment"><p>In this week’s lab, we’ll be conducting a partial replication of <span class="citation" data-cites="Grumbach2022-zj">Grumbach and Hill (<a href="#/references" role="doc-biblioref" onclick="">2022</a>)</span> <a href="../files/readings/grumbach_hill_2021.pdf" target="_blank">“Rock the Registration: Same Day Registration Increases Turnout of Young Voters.”</a></p></li>
<li class="fragment"><p>On Thursday, we’ll walk through</p>
<ul>
<li class="fragment">the paper’s design and argument</li>
<li class="fragment">setting up and exploring the data</li>
<li class="fragment">reproducing some descriptive figures</li>
</ul></li>
<li class="fragment"><p>Next Thursday, we’ll focus on replicating and understanding the main results</p></li>
</ul>
</section>
<section id="section-17" class="slide level2">
<h2></h2>

<img data-src="images/07_grumbach2022.png" class="r-stretch"></section>
<section id="general-structure-of-labs-7-8" class="slide level2">
<h2>General Structure of Labs 7-8</h2>
<p>Lab 7:</p>
<ul>
<li class="fragment">Summarize the study</li>
<li class="fragment">Download and load the data</li>
<li class="fragment">Recode the data</li>
<li class="fragment">Merge the data</li>
<li class="fragment">Recreate Figures 1 and 2</li>
</ul>
<p>Lab 8:</p>
<ul>
<li class="fragment">Estimate some baseline models to understand Two-Way Fixed Effects</li>
<li class="fragment">Estimate some of the models in Figure 3</li>
<li class="fragment">Extend the study, perhaps considering SDR by race or gender</li>
</ul>
</section>
<section id="reading-grumbach-and-hill-2022" class="slide level2 smaller">
<h2>Reading Grumbach and Hill (2022)</h2>
<p>Reading <span class="citation" data-cites="Grumbach2022-zj">Grumbach and Hill (<a href="#/references" role="doc-biblioref" onclick="">2022</a>)</span>, focus on being able to answer the following:</p>
<ul>
<li class="fragment">What’s the research question?
<ul>
<li class="fragment">General RQ: First sentence, second paragraph, p.&nbsp;405</li>
<li class="fragment">Specific RQs: p.&nbsp;405-406</li>
</ul></li>
<li class="fragment">What’s the theoretical framework?
<ul>
<li class="fragment">Intro and Theory of Registration, p.&nbsp;407-409</li>
</ul></li>
<li class="fragment">What’s the empirical design?
<ul>
<li class="fragment">Methods pp.&nbsp;409-410</li>
</ul></li>
<li class="fragment">What’s are the main results?
<ul>
<li class="fragment">Results pp.&nbsp;410-413</li>
<li class="fragment">Figure 3 in particular</li>
</ul></li>
</ul>
</section>
<section id="q1-download-the-replication-files" class="slide level2">
<h2>Q1: Download the replication files</h2>
<p>Rather than downloading the files directly from the paper’s <span class="blue">replication archives</span>, in this lab, we will <span class="blue">download the replication files</span> to your computers and then <span class="blue">load the data</span> into R from <span class="blue">where they’re saved</span></p>
<p>Please click <a href="https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/AW5LU8" target="_blank">here</a> and let’s download the files together.</p>
</section>
<section id="go-to-the-papers-dataverse" class="slide level2">
<h2>1. Go to the paper’s dataverse</h2>
<p>Please click <a href="https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/AW5LU8" target="_blank">here</a></p>

<img data-src="images/07_rep1.png" class="r-stretch"></section>
<section id="log-in-through-brown" class="slide level2">
<h2>2. Log in through Brown</h2>

<img data-src="images/07_rep2.png" class="r-stretch"></section>
<section id="select-all-of-the-files" class="slide level2">
<h2>3. Select all of the files</h2>
<p>Make sure to <strong>Select all 11 files in this dataset</strong></p>
<p><img data-src="images/07_rep3.png"></p>
<p><img data-src="images/07_rep4.png"></p>
</section>
<section id="download-the-files-in-their-original-format" class="slide level2">
<h2>4. Download the files in their original format</h2>

<img data-src="images/07_rep5.png" class="r-stretch"></section>
<section id="section-18" class="slide level2">
<h2></h2>
<h3 id="save-and-unzip-the-downloaded-files-into-your-course-folder-where-your-labs-are-saved">5. Save and unzip the downloaded files into your course folder where your labs are saved</h3>

<img data-src="images/07_rep6.png" class="r-stretch"></section>
<section id="q3-load-the-data-into-r" class="slide level2 smaller">
<h2>Q3: Load the data into R</h2>
<p>If you’ve saved the dataverse_files <span class="blue">into the folder where your lab is saved</span>, you should be able to run the following code after <span class="blue">setting the working directory</span> to <span class="blue">source file location</span>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a></a><span class="co"># Remember to set working directory:</span></span>
<span id="cb40-2"><a></a><span class="co"># Session &gt; Set working directory &gt; Source file location</span></span>
<span id="cb40-3"><a></a></span>
<span id="cb40-4"><a></a><span class="co"># Load fips_codes</span></span>
<span id="cb40-5"><a></a>fips_codes <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"dataverse_files/fips_codes_website.csv"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb40-6"><a></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb40-7"><a></a></span>
<span id="cb40-8"><a></a><span class="co"># Load policy data</span></span>
<span id="cb40-9"><a></a>data <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"dataverse_files/policy_data_updated.RDS"</span>)<span class="sc">%&gt;%</span></span>
<span id="cb40-10"><a></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span>
<span id="cb40-11"><a></a></span>
<span id="cb40-12"><a></a><span class="co"># Load CPS data</span></span>
<span id="cb40-13"><a></a>cps <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"dataverse_files/cps_00021.csv"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb40-14"><a></a>  janitor<span class="sc">::</span><span class="fu">clean_names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="summary-1" class="title-slide slide level1 inverse center">
<h1><i class="fa-solid fa-home" aria-label="home"></i> Summary</h1>

</section>
<section id="summary-2" class="slide level2">
<h2>Summary</h2>
</section>
<section id="references" class="slide level2 smaller scrollable">
<h2>References</h2>


<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-Callaway2021-av" class="csl-entry" role="listitem">
Callaway, Brantly, and Pedro H C Sant’Anna. 2021. <span>“<span class="nocase">Difference-in-Differences with multiple time periods</span>.”</span> <em>Journal of Econometrics</em> 225 (2): 200–230.
</div>
<div id="ref-Goodman-Bacon2021-ah" class="csl-entry" role="listitem">
Goodman-Bacon, Andrew. 2021. <span>“<span class="nocase">Difference-in-differences with variation in treatment timing</span>.”</span> <em>Journal of Econometrics</em> 225 (2): 254–77.
</div>
<div id="ref-Grumbach2022-zj" class="csl-entry" role="listitem">
Grumbach, Jacob M, and Charlotte Hill. 2022. <span>“<span class="nocase">Rock the Registration: Same Day Registration Increases Turnout of Young Voters</span>.”</span> <em>The Journal of Politics</em> 84 (1): 405–17.
</div>
</div>
</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="images/pols1600_hex.png" class="slide-logo"></p>
<div class="footer footer-default">
<p>POLS 1600</p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"8\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'fade',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    

    <script>

      // htmlwidgets need to know to resize themselves when slides are shown/hidden.

      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current

      // slide changes (different for each slide format).

      (function () {

        // dispatch for htmlwidgets

        function fireSlideEnter() {

          const event = window.document.createEvent("Event");

          event.initEvent("slideenter", true, true);

          window.document.dispatchEvent(event);

        }

    

        function fireSlideChanged(previousSlide, currentSlide) {

          fireSlideEnter();

    

          // dispatch for shiny

          if (window.jQuery) {

            if (previousSlide) {

              window.jQuery(previousSlide).trigger("hidden");

            }

            if (currentSlide) {

              window.jQuery(currentSlide).trigger("shown");

            }

          }

        }

    

        // hookup for slidy

        if (window.w3c_slidy) {

          window.w3c_slidy.add_observer(function (slide_num) {

            // slide_num starts at position 1

            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);

          });

        }

    

      })();

    </script>

    

    <script id="quarto-html-after-body" type="application/javascript">
      window.document.addEventListener("DOMContentLoaded", function (event) {
        const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
        tabsets.forEach(function(tabset) {
          const tabby = new Tabby('#' + tabset.id);
        });
        const isCodeAnnotation = (el) => {
          for (const clz of el.classList) {
            if (clz.startsWith('code-annotation-')) {                     
              return true;
            }
          }
          return false;
        }
        const onCopySuccess = function(e) {
          // button target
          const button = e.trigger;
          // don't keep focus
          button.blur();
          // flash "checked"
          button.classList.add('code-copy-button-checked');
          var currentTitle = button.getAttribute("title");
          button.setAttribute("title", "Copied!");
          let tooltip;
          if (window.bootstrap) {
            button.setAttribute("data-bs-toggle", "tooltip");
            button.setAttribute("data-bs-placement", "left");
            button.setAttribute("data-bs-title", "Copied!");
            tooltip = new bootstrap.Tooltip(button, 
              { trigger: "manual", 
                customClass: "code-copy-button-tooltip",
                offset: [0, -8]});
            tooltip.show();    
          }
          setTimeout(function() {
            if (tooltip) {
              tooltip.hide();
              button.removeAttribute("data-bs-title");
              button.removeAttribute("data-bs-toggle");
              button.removeAttribute("data-bs-placement");
            }
            button.setAttribute("title", currentTitle);
            button.classList.remove('code-copy-button-checked');
          }, 1000);
          // clear code selection
          e.clearSelection();
        }
        const getTextToCopy = function(trigger) {
            const codeEl = trigger.previousElementSibling.cloneNode(true);
            for (const childEl of codeEl.children) {
              if (isCodeAnnotation(childEl)) {
                childEl.remove();
              }
            }
            return codeEl.innerText;
        }
        const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
          text: getTextToCopy
        });
        clipboard.on('success', onCopySuccess);
        if (window.document.getElementById('quarto-embedded-source-code-modal')) {
          const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
            text: getTextToCopy,
            container: window.document.getElementById('quarto-embedded-source-code-modal')
          });
          clipboardModal.on('success', onCopySuccess);
        }
          var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var mailtoRegex = new RegExp(/^mailto:/);
            var filterRegex = new RegExp("https:\/\/josephessig-source\.github\.io\/pols1600_site\/");
          var isInternal = (href) => {
              return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
          }
          // Inspect non-navigation links and adorn them if external
         var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
          for (var i=0; i<links.length; i++) {
            const link = links[i];
            if (!isInternal(link.href)) {
              // undo the damage that might have been done by quarto-nav.js in the case of
              // links that we want to consider external
              if (link.dataset.originalHref !== undefined) {
                link.href = link.dataset.originalHref;
              }
            }
          }
        function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
          const config = {
            allowHTML: true,
            maxWidth: 500,
            delay: 100,
            arrow: false,
            appendTo: function(el) {
                return el.closest('section.slide') || el.parentElement;
            },
            interactive: true,
            interactiveBorder: 10,
            theme: 'light-border',
            placement: 'bottom-start',
          };
          if (contentFn) {
            config.content = contentFn;
          }
          if (onTriggerFn) {
            config.onTrigger = onTriggerFn;
          }
          if (onUntriggerFn) {
            config.onUntrigger = onUntriggerFn;
          }
            config['offset'] = [0,0];
            config['maxWidth'] = 700;
          window.tippy(el, config); 
        }
        const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
        for (var i=0; i<noterefs.length; i++) {
          const ref = noterefs[i];
          tippyHover(ref, function() {
            // use id or data attribute instead here
            let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
            try { href = new URL(href).hash; } catch {}
            const id = href.replace(/^#\/?/, "");
            const note = window.document.getElementById(id);
            if (note) {
              return note.innerHTML;
            } else {
              return "";
            }
          });
        }
        const findCites = (el) => {
          const parentEl = el.parentElement;
          if (parentEl) {
            const cites = parentEl.dataset.cites;
            if (cites) {
              return {
                el,
                cites: cites.split(' ')
              };
            } else {
              return findCites(el.parentElement)
            }
          } else {
            return undefined;
          }
        };
        var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
        for (var i=0; i<bibliorefs.length; i++) {
          const ref = bibliorefs[i];
          const citeInfo = findCites(ref);
          if (citeInfo) {
            tippyHover(citeInfo.el, function() {
              var popup = window.document.createElement('div');
              citeInfo.cites.forEach(function(cite) {
                var citeDiv = window.document.createElement('div');
                citeDiv.classList.add('hanging-indent');
                citeDiv.classList.add('csl-entry');
                var biblioDiv = window.document.getElementById('ref-' + cite);
                if (biblioDiv) {
                  citeDiv.innerHTML = biblioDiv.innerHTML;
                }
                popup.appendChild(citeDiv);
              });
              return popup.innerHTML;
            });
          }
        }
      });
      </script>
    

</body></html>